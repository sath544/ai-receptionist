<!DOCTYPE html>
<html>
<head>
<title>Analytics</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
    body { font-family:Arial; padding:20px; background:#f3f4f6; }
    .card { background:white; padding:20px; margin-bottom:20px; border-radius:8px; box-shadow:0 0 10px rgba(0,0,0,.1); }
    .grid { display:grid; grid-template-columns:repeat(3,1fr); gap:20px; }
    .big { font-size:40px; font-weight:bold; }
    a.btn { background:#2563eb; padding:8px 12px; color:white; text-decoration:none; border-radius:5px; }
</style>
</head>

<body>

<h2>Analytics Dashboard</h2>
<a class="btn" href="/superadmin">← Back</a>

<div class="grid">
    <div class="card">
        <div class="big">{{ total_clients }}</div>
        <p>Total Clients</p>
    </div>

    <div class="card">
        <div class="big">{{ total_appointments }}</div>
        <p>Total Appointments</p>
    </div>

    <div class="card">
        <div class="big">{{ today_count }}</div>
        <p>Today</p>
    </div>

    <div class="card">
        <div class="big">{{ month_count }}</div>
        <p>This Month</p>
    </div>
</div>

<div class="card">
    <h3>Top Clients</h3>
    <ul>
    {% for c, count in top_clients %}
        <li>{{ c }} — {{ count }} appointments</li>
    {% endfor %}
    </ul>
</div>

<div class="card">
    <h3>Last 30 Days</h3>
    <canvas id="chart"></canvas>
</div>

<script>
new Chart(document.getElementById('chart'), {
    type: 'line',
    data: {
        labels: {{ labels|tojson }},
        datasets: [{
            label: "Appointments",
            data: {{ values|tojson }},
            borderColor: "#2563eb",
            borderWidth: 3
        }]
    }
});
</script>

</body>
</html>
